package json

import (
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestEqual(t *testing.T) {
	tests := []struct {
		name    string
		isEqual bool
		b1      []byte
		b2      []byte
	}{
		{
			name:    "empty array",
			isEqual: true,
			b1:      []byte(`[]`),
			b2:      []byte(`[]`),
		},
		{
			name:    "empty object",
			isEqual: true,
			b1:      []byte(`{}`),
			b2:      []byte(`{}`),
		},
		{
			name:    "different basic types",
			isEqual: false,
			b1:      []byte(`[]`),
			b2:      []byte(`{}`),
		},
		{
			name:    "different first name",
			isEqual: false,
			b1:      []byte(`{"FirstName":"Alan"}`),
			b2:      []byte(`{"FirstName":"Galileo"}`),
		},
		{
			name:    "equal first name",
			isEqual: true,
			b1:      []byte(`{"FirstName":"Alan"}`),
			b2:      []byte(`{"FirstName":"Alan"}`),
		},
		{
			name:    "different map size",
			isEqual: false,
			b1:      []byte(`{"FirstName":"Alan"}`),
			b2:      []byte(`{"FirstName":"Alan", "LastName": "Turing"}`),
		},
		{
			name:    "equal fields different order",
			isEqual: true,
			b1:      []byte(`{"FirstName":"Alan", "LastName": "Turing"}`),
			b2:      []byte(`{"LastName": "Turing", "FirstName":"Alan"}`),
		},
		{
			name:    "equal fields different order",
			isEqual: true,
			b1:      []byte(`{"x": {"t": 1, "s": 2}, "z": 1}`),
			b2:      []byte(`{"z": 1, "x": {"s": 2, "t": 1}}`),
		},
		{
			name:    "equal array objects",
			isEqual: true,
			b1:      []byte(`[{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"]}]`),
			b2:      []byte(`[{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"]}]`),
		},
		{
			name:    "equal exact same objects",
			isEqual: true,
			b1:      []byte(`{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"], "Info" : [{"Country":  "US", "Number": 111}]}`),
			b2:      []byte(`{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"], "Info" : [{"Country":  "US", "Number": 111}]}`),
		},
		{
			name:    "equal flip one field at the root",
			isEqual: true,
			b1:      []byte(`{"LastName": "Turing", "FirstName":"Alan", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"], "Info" : [{"Country":  "US", "Number": 111}]}`),
			b2:      []byte(`{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"], "Info" : [{"Country":  "US", "Number": 111}]}`),
		},
		{
			name:    "flip one field inside a node",
			isEqual: true,
			b1:      []byte(`{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Martin Fowler", "Rob Pike"], "Info" : [{"Country":  "US", "Number": 111}]}`),
			b2:      []byte(`{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"], "Info" : [{"Country":  "US", "Number": 111}]}`),
		},
		{
			name:    "Flip one field inside inner node",
			isEqual: true,
			b1:      []byte(`{"LastName": "Turing", "FirstName":"Alan", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"], "Info" : [{"Country":  "US", "Number": 111}]}`),
			b2:      []byte(`{"LastName": "Turing", "FirstName":"Alan", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"], "Info" : [{"Number": 111, "Country":  "US"}]}`),
		},
		{
			name:    "flip object in root array",
			isEqual: true,
			b1:      []byte(`[{"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"]}, {"FirstName":"Martin", "LastName": "Fowler", "Age" : 30, "Friends" : []}]`),
			b2:      []byte(`[{"FirstName":"Martin", "LastName": "Fowler", "Age" : 30, "Friends" : []}, {"FirstName":"Alan", "LastName": "Turing", "Age" : 20, "Friends" : ["Rob Pike", "Martin Fowler"]}]`),
		},
		{
			name:    "some complex example",
			isEqual: true,
			b1:      []byte(`[{"a": 1, "b": [{"c": [1,5,2,4]}, {"d": [1]}]}]`),
			b2:      []byte(`[{"b": [{"d": [1]}, {"c": [1,2,4,5]}], "a": 1}]`),
		},
		{
			name:    "payment method for MLA",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":187,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696444,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0,"installment_full_tea":null,"labels":["CFT_0,00%|TEA_0,00%"],"max_allowed_amount":250000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":150.35,"installment_reduced_cft":199.44,"installments":3,"installment_rate":19.72,"id":67696441,"installment_full_cft":199.44,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":150.35,"labels":["CFT_199,44%|TEA_150,35%"],"max_allowed_amount":250000,"base_installment_rate":19.72,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":142.79,"installment_reduced_cft":187.01,"installments":6,"installment_rate":34.49,"id":67696442,"installment_full_cft":187.01,"discount_rate":0,"min_allowed_amount":3,"installment_full_tea":142.79,"labels":["CFT_187,01%|TEA_142,79%","recommended_interest_installment_with_some_banks"],"max_allowed_amount":250000,"base_installment_rate":34.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":136.21,"installment_reduced_cft":176.57,"installments":9,"installment_rate":49.19,"id":441302368,"installment_full_cft":176.57,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":136.21,"labels":["CFT_176,57%|TEA_136,21%"],"max_allowed_amount":250000,"base_installment_rate":49.19,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":130.33,"installment_reduced_cft":167.52,"installments":12,"installment_rate":63.77,"id":67696440,"installment_full_cft":167.52,"discount_rate":0,"min_allowed_amount":6,"installment_full_tea":130.33,"labels":["recommended_installment","CFT_167,52%|TEA_130,33%"],"max_allowed_amount":250000,"base_installment_rate":63.77,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa Argentina S.A.","id":1},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(476520|473713|473713|473227|444493|410122|405517|402789|417856|448712|453770|434541|411199|423465|434540|434542|434538|423018|488241|489634|434537|434539|434536|427156|427157|434535|434534|434533|423077|434532|434586|423001|434531|411197|443264|400276|400615|402914|404625|405069|434543|416679|405515|405516|405755|405896|405897|406290|406291|406375|406652|406998|406999|408515|410082|410083|410121|410123|410853|411849|417309|421738|423623|428062|428063|428064|434795|437996|439818|442371|442548|444060|446343|446344|446347|450412|450799|451377|451701|451751|451756|451757|451758|451761|451763|451764|451765|451766|451767|451768|451769|451770|451772|451773|457596|457665|462815|463465|468508|473710|473711|473712|473714|473715|473716|473717|473718|473719|473720|473721|473722|473725|477051|477053|481397|481501|481502|481550|483002|483020|483188|489412|492528|499859|446344|446345|446346|400448)"},"id":67696446}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"MELI","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLA","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":187,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696444,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0,"installment_full_tea":null,"labels":["CFT_0,00%|TEA_0,00%"],"max_allowed_amount":250000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":150.35,"installment_reduced_cft":199.44,"installments":3,"installment_rate":19.72,"id":67696441,"installment_full_cft":199.44,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":150.35,"labels":["CFT_199,44%|TEA_150,35%"],"max_allowed_amount":250000,"base_installment_rate":19.72,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":142.79,"installment_reduced_cft":187.01,"installments":6,"installment_rate":34.49,"id":67696442,"installment_full_cft":187.01,"discount_rate":0,"min_allowed_amount":3,"installment_full_tea":142.79,"labels":["CFT_187,01%|TEA_142,79%","recommended_interest_installment_with_some_banks"],"max_allowed_amount":250000,"base_installment_rate":34.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":136.21,"installment_reduced_cft":176.57,"installments":9,"installment_rate":49.19,"id":441302368,"installment_full_cft":176.57,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":136.21,"labels":["CFT_176,57%|TEA_136,21%"],"max_allowed_amount":250000,"base_installment_rate":49.19,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":130.33,"installment_reduced_cft":167.52,"installments":12,"installment_rate":63.77,"id":67696440,"installment_full_cft":167.52,"discount_rate":0,"min_allowed_amount":6,"installment_full_tea":130.33,"labels":["recommended_installment","CFT_167,52%|TEA_130,33%"],"max_allowed_amount":250000,"base_installment_rate":63.77,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa Argentina S.A.","id":1},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(476520|473713|473713|473227|444493|410122|405517|402789|417856|448712|453770|434541|411199|423465|434540|434542|434538|423018|488241|489634|434537|434539|434536|427156|427157|434535|434534|434533|423077|434532|434586|423001|434531|411197|443264|400276|400615|402914|404625|405069|434543|416679|405515|405516|405755|405896|405897|406290|406291|406375|406652|406998|406999|408515|410082|410083|410121|410123|410853|411849|417309|421738|423623|428062|428063|428064|434795|437996|439818|442371|442548|444060|446343|446344|446347|450412|450799|451377|451701|451751|451756|451757|451758|451761|451763|451764|451765|451766|451767|451768|451769|451770|451772|451773|457596|457665|462815|463465|468508|473710|473711|473712|473714|473715|473716|473717|473718|473719|473720|473721|473722|473725|477051|477053|481397|481501|481502|481550|483002|483020|483188|489412|492528|499859|446344|446345|446346|400448)"},"id":67696446}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"MELI","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLA","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
		},
		{
			name:    "payment method for MLB",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":19,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696848,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.5,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":2.39,"id":67696849,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":10,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":2.39,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":4.78,"id":67696844,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":4.78,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":4,"installment_rate":7.17,"id":67696845,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":20,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":7.17,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":5,"installment_rate":8.99,"id":67696846,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":25,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":8.99,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":10.49,"id":67696847,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":30,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":10.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":7,"installment_rate":11.83,"id":98810700,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":35,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":11.83,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":8,"installment_rate":12.49,"id":98799118,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":40,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":12.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":13.21,"id":67696842,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":45,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":13.21,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":10,"installment_rate":14.59,"id":67696850,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":50,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":14.59,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":11,"installment_rate":16,"id":98799119,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":55,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":16,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":17.41,"id":67696843,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":60,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":17.41,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":25},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^(4)","installments_pattern":"^(?!(453998|426398|462437|451212|456188))","exclusion_pattern":"^((451416)|(438935)|(40117[8-9])|(45763[1-2])|(457393)|(431274))"},"id":67696852}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLB","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":19,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696848,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.5,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":2.39,"id":67696849,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":10,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":2.39,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":4.78,"id":67696844,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":4.78,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":4,"installment_rate":7.17,"id":67696845,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":20,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":7.17,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":5,"installment_rate":8.99,"id":67696846,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":25,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":8.99,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":10.49,"id":67696847,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":30,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":10.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":7,"installment_rate":11.83,"id":98810700,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":35,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":11.83,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":8,"installment_rate":12.49,"id":98799118,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":40,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":12.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":13.21,"id":67696842,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":45,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":13.21,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":10,"installment_rate":14.59,"id":67696850,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":50,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":14.59,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":11,"installment_rate":16,"id":98799119,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":55,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":16,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":17.41,"id":67696843,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":60,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":17.41,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":25},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^(4)","installments_pattern":"^(?!(453998|426398|462437|451212|456188))","exclusion_pattern":"^((451416)|(438935)|(40117[8-9])|(45763[1-2])|(457393)|(431274))"},"id":67696852}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLB","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
		},
		{
			name:    "payment method for MLC",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":24,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67700659,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":0,"id":67700658,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":0,"id":67700660,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":0,"id":67700661,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":["recommended_installment"],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":0,"id":67700662,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":0,"id":67700663,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]}],"issuer":{"default":true,"name":"Visa","id":168},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(465375|445596|460072|499847)"},"id":67700666}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLC","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":24,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67700659,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":0,"id":67700658,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":0,"id":67700660,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":0,"id":67700661,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":["recommended_installment"],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":0,"id":67700662,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":0,"id":67700663,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]}],"issuer":{"default":true,"name":"Visa","id":168},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(465375|445596|460072|499847)"},"id":67700666}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLC","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
		},
		{
			name:    "payment method for MLU",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":31,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":124472954,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":300000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":1084},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^(403364|409078|410377|415723|421571|42275[456]|437846|44478[123]|44816[234]|449749|449750|449769|450626|450637|450642|450706|451319|45136[67]|454053|45406[56]|454090|45460[23]|454884|455104|455110|455134|455148|45517[56]|455189|458055|46791[01]|47281[123]|473103|473496|47715[789]|483087|485956|489417|49139[456]|491505|491510|491669|491670|49188[234]|49296[1234]|49352[56]|493726|49377[12]|493787|49400[78]|494016|494044|494078|494085|494095|494197|494199|496034|498479)","exclusion_pattern":"^(498535|498525|481521|469703|466240|463308|450624|441010|430308|430307|425677|421301|421300|414284|400773|400773|414284|418989|421300|421301|421827|425677|426511|430307|441010|450624|460067|463308|466240|466241|469703|481521|483114|498524|498525|498535|493526)"},"id":124472957}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLU","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":31,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":124472954,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":300000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":1084},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^(403364|409078|410377|415723|421571|42275[456]|437846|44478[123]|44816[234]|449749|449750|449769|450626|450637|450642|450706|451319|45136[67]|454053|45406[56]|454090|45460[23]|454884|455104|455110|455134|455148|45517[56]|455189|458055|46791[01]|47281[123]|473103|473496|47715[789]|483087|485956|489417|49139[456]|491505|491510|491669|491670|49188[234]|49296[1234]|49352[56]|493726|49377[12]|493787|49400[78]|494016|494044|494078|494085|494095|494197|494199|496034|498479)","exclusion_pattern":"^(498535|498525|481521|469703|466240|463308|450624|441010|430308|430307|425677|421301|421300|414284|400773|400773|414284|418989|421300|421301|421827|425677|426511|430307|441010|450624|460067|463308|466240|466241|469703|481521|483114|498524|498525|498535|493526)"},"id":124472957}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLU","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
		},
		{
			name:    "slice with duplicates",
			isEqual: false,
			b1:      []byte(`{"nums":[1,3,3,5,5]}`),
			b2:      []byte(`{"nums":[1,1,3,5,5]}`),
		},
		{
			name:    "slice with different primitive types",
			isEqual: false,
			b1:      []byte(`[1,3,3]`),
			b2:      []byte(`[1,1,"house"]`),
		},
		{
			name:    "slice with different types",
			isEqual: false,
			b1:      []byte(`[{"nums": 2}, 3, 3]`),
			b2:      []byte(`[1,1,"house",3.14,null]`),
		},
		{
			name:    "slice with different very complex things",
			isEqual: true,
			b1:      []byte(`{"a": [1,"a",{"a":"a","b":"b"}]}`),
			b2:      []byte(`{"a": [1,{"b":"b","a":"a"},"a"]}`),
		},
		{
			name:    "object with null should be true",
			isEqual: true,
			b1:      []byte(`{"a": null, "c": null, "z": [1,5,3], "b": 3.14}`),
			b2:      []byte(`{"b": 3.14, "a": null, "c": null, "z": [3,5,1]}`),
		},
		{
			name:    "object with null should be true",
			isEqual: true,
			b1:      []byte(`[1,5,3,4,1,null,null,9,3.14]`),
			b2:      []byte(`[1,5,null,null,9,3.14,3,4,1]`),
		},
		{
			name:    "object with null should be false one less null",
			isEqual: false,
			b1:      []byte(`[1,5,3,4,1,null,null,9,3.14]`),
			b2:      []byte(`[1,5,null,9,3.14,1,3,4,1]`),
		},
	}

	for _, test := range tests {
		t.Run(test.name, func(t *testing.T) {
			assert.Equal(t, test.isEqual, Equal(test.b1, test.b2))
		})

	}
}

func BenchmarkEqual(b *testing.B) {
	tests := []struct {
		name    string
		isEqual bool
		b1      []byte
		b2      []byte
	}{
		{
			name:    "payment method for MLA",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":187,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696444,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0,"installment_full_tea":null,"labels":["CFT_0,00%|TEA_0,00%"],"max_allowed_amount":250000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":150.35,"installment_reduced_cft":199.44,"installments":3,"installment_rate":19.72,"id":67696441,"installment_full_cft":199.44,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":150.35,"labels":["CFT_199,44%|TEA_150,35%"],"max_allowed_amount":250000,"base_installment_rate":19.72,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":142.79,"installment_reduced_cft":187.01,"installments":6,"installment_rate":34.49,"id":67696442,"installment_full_cft":187.01,"discount_rate":0,"min_allowed_amount":3,"installment_full_tea":142.79,"labels":["CFT_187,01%|TEA_142,79%","recommended_interest_installment_with_some_banks"],"max_allowed_amount":250000,"base_installment_rate":34.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":136.21,"installment_reduced_cft":176.57,"installments":9,"installment_rate":49.19,"id":441302368,"installment_full_cft":176.57,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":136.21,"labels":["CFT_176,57%|TEA_136,21%"],"max_allowed_amount":250000,"base_installment_rate":49.19,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":130.33,"installment_reduced_cft":167.52,"installments":12,"installment_rate":63.77,"id":67696440,"installment_full_cft":167.52,"discount_rate":0,"min_allowed_amount":6,"installment_full_tea":130.33,"labels":["recommended_installment","CFT_167,52%|TEA_130,33%"],"max_allowed_amount":250000,"base_installment_rate":63.77,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa Argentina S.A.","id":1},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(476520|473713|473713|473227|444493|410122|405517|402789|417856|448712|453770|434541|411199|423465|434540|434542|434538|423018|488241|489634|434537|434539|434536|427156|427157|434535|434534|434533|423077|434532|434586|423001|434531|411197|443264|400276|400615|402914|404625|405069|434543|416679|405515|405516|405755|405896|405897|406290|406291|406375|406652|406998|406999|408515|410082|410083|410121|410123|410853|411849|417309|421738|423623|428062|428063|428064|434795|437996|439818|442371|442548|444060|446343|446344|446347|450412|450799|451377|451701|451751|451756|451757|451758|451761|451763|451764|451765|451766|451767|451768|451769|451770|451772|451773|457596|457665|462815|463465|468508|473710|473711|473712|473714|473715|473716|473717|473718|473719|473720|473721|473722|473725|477051|477053|481397|481501|481502|481550|483002|483020|483188|489412|492528|499859|446344|446345|446346|400448)"},"id":67696446}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"MELI","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLA","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":187,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696444,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0,"installment_full_tea":null,"labels":["CFT_0,00%|TEA_0,00%"],"max_allowed_amount":250000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":150.35,"installment_reduced_cft":199.44,"installments":3,"installment_rate":19.72,"id":67696441,"installment_full_cft":199.44,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":150.35,"labels":["CFT_199,44%|TEA_150,35%"],"max_allowed_amount":250000,"base_installment_rate":19.72,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":142.79,"installment_reduced_cft":187.01,"installments":6,"installment_rate":34.49,"id":67696442,"installment_full_cft":187.01,"discount_rate":0,"min_allowed_amount":3,"installment_full_tea":142.79,"labels":["CFT_187,01%|TEA_142,79%","recommended_interest_installment_with_some_banks"],"max_allowed_amount":250000,"base_installment_rate":34.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":136.21,"installment_reduced_cft":176.57,"installments":9,"installment_rate":49.19,"id":441302368,"installment_full_cft":176.57,"discount_rate":0,"min_allowed_amount":2,"installment_full_tea":136.21,"labels":["CFT_176,57%|TEA_136,21%"],"max_allowed_amount":250000,"base_installment_rate":49.19,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":130.33,"installment_reduced_cft":167.52,"installments":12,"installment_rate":63.77,"id":67696440,"installment_full_cft":167.52,"discount_rate":0,"min_allowed_amount":6,"installment_full_tea":130.33,"labels":["recommended_installment","CFT_167,52%|TEA_130,33%"],"max_allowed_amount":250000,"base_installment_rate":63.77,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa Argentina S.A.","id":1},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(476520|473713|473713|473227|444493|410122|405517|402789|417856|448712|453770|434541|411199|423465|434540|434542|434538|423018|488241|489634|434537|434539|434536|427156|427157|434535|434534|434533|423077|434532|434586|423001|434531|411197|443264|400276|400615|402914|404625|405069|434543|416679|405515|405516|405755|405896|405897|406290|406291|406375|406652|406998|406999|408515|410082|410083|410121|410123|410853|411849|417309|421738|423623|428062|428063|428064|434795|437996|439818|442371|442548|444060|446343|446344|446347|450412|450799|451377|451701|451751|451756|451757|451758|451761|451763|451764|451765|451766|451767|451768|451769|451770|451772|451773|457596|457665|462815|463465|468508|473710|473711|473712|473714|473715|473716|473717|473718|473719|473720|473721|473722|473725|477051|477053|481397|481501|481502|481550|483002|483020|483188|489412|492528|499859|446344|446345|446346|400448)"},"id":67696446}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"MELI","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLA","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
		},
		{
			name:    "payment method for MLB",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":19,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696848,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.5,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":2.39,"id":67696849,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":10,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":2.39,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":4.78,"id":67696844,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":4.78,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":4,"installment_rate":7.17,"id":67696845,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":20,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":7.17,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":5,"installment_rate":8.99,"id":67696846,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":25,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":8.99,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":10.49,"id":67696847,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":30,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":10.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":7,"installment_rate":11.83,"id":98810700,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":35,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":11.83,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":8,"installment_rate":12.49,"id":98799118,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":40,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":12.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":13.21,"id":67696842,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":45,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":13.21,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":10,"installment_rate":14.59,"id":67696850,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":50,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":14.59,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":11,"installment_rate":16,"id":98799119,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":55,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":16,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":17.41,"id":67696843,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":60,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":17.41,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":25},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^(4)","installments_pattern":"^(?!(453998|426398|462437|451212|456188))","exclusion_pattern":"^((451416)|(438935)|(40117[8-9])|(45763[1-2])|(457393)|(431274))"},"id":67696852}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLB","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":19,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67696848,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.5,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":2.39,"id":67696849,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":10,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":2.39,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":4.78,"id":67696844,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":4.78,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":4,"installment_rate":7.17,"id":67696845,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":20,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":7.17,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":5,"installment_rate":8.99,"id":67696846,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":25,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":8.99,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":10.49,"id":67696847,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":30,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":10.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":7,"installment_rate":11.83,"id":98810700,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":35,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":11.83,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":8,"installment_rate":12.49,"id":98799118,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":40,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":12.49,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":13.21,"id":67696842,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":45,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":13.21,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":10,"installment_rate":14.59,"id":67696850,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":50,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":14.59,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":11,"installment_rate":16,"id":98799119,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":55,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":16,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":17.41,"id":67696843,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":60,"installment_full_tea":null,"labels":[],"max_allowed_amount":50000,"base_installment_rate":17.41,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":25},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^(4)","installments_pattern":"^(?!(453998|426398|462437|451212|456188))","exclusion_pattern":"^((451416)|(438935)|(40117[8-9])|(45763[1-2])|(457393)|(431274))"},"id":67696852}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"supported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLB","processing_mode":"aggregator","additional_info_needed":["cardholder_name","cardholder_identification_type","cardholder_identification_number"],"status":"active"}]}`),
		},
		{
			name:    "payment method for MLC",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":24,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67700659,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":0,"id":67700658,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":0,"id":67700660,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":0,"id":67700661,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":["recommended_installment"],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":0,"id":67700662,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":0,"id":67700663,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]}],"issuer":{"default":true,"name":"Visa","id":168},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(465375|445596|460072|499847)"},"id":67700666}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLC","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":24,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":67700659,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":2,"installment_rate":0,"id":67700658,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":3,"installment_rate":0,"id":67700660,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":6,"installment_rate":0,"id":67700661,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":["recommended_installment"],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":9,"installment_rate":0,"id":67700662,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]},{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":12,"installment_rate":0,"id":67700663,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":0.01,"installment_full_tea":null,"labels":[],"max_allowed_amount":7000000,"base_installment_rate":0,"installment_rate_collector":["THIRD_PARTY"]}],"issuer":{"default":true,"name":"Visa","id":168},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^4","exclusion_pattern":"^(465375|445596|460072|499847)"},"id":67700666}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLC","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
		},
		{
			name:    "payment method for MLU",
			isEqual: true,
			b1:      []byte(`{"paging":{"total":31,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":124472954,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":300000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":1084},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^(403364|409078|410377|415723|421571|42275[456]|437846|44478[123]|44816[234]|449749|449750|449769|450626|450637|450642|450706|451319|45136[67]|454053|45406[56]|454090|45460[23]|454884|455104|455110|455134|455148|45517[56]|455189|458055|46791[01]|47281[123]|473103|473496|47715[789]|483087|485956|489417|49139[456]|491505|491510|491669|491670|49188[234]|49296[1234]|49352[56]|493726|49377[12]|493787|49400[78]|494016|494044|494078|494085|494095|494197|494199|496034|498479)","exclusion_pattern":"^(498535|498525|481521|469703|466240|463308|450624|441010|430308|430307|425677|421301|421300|414284|400773|400773|414284|418989|421300|421301|421827|425677|426511|430307|441010|450624|460067|463308|466240|466241|469703|481521|483114|498524|498525|498535|493526)"},"id":124472957}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLU","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
			b2:      []byte(`{"paging":{"total":31,"limit":1,"offset":0},"results":[{"financial_institutions":[],"secure_thumbnail":"https://www.mercadopago.com/org-img/MP3/API/logos/visa.gif","payer_costs":[{"installment_reduced_tea":null,"installment_reduced_cft":null,"installments":1,"installment_rate":0,"id":124472954,"installment_full_cft":null,"discount_rate":0,"min_allowed_amount":15,"installment_full_tea":null,"labels":[],"max_allowed_amount":300000,"base_installment_rate":0,"installment_rate_collector":["MERCADOPAGO"]}],"issuer":{"default":true,"name":"Visa","id":1084},"total_financial_cost":null,"min_accreditation_days":0,"max_accreditation_days":2,"merchant_account_id":null,"id":"visa","payment_type_id":"credit_card","accreditation_time":2880,"owner":"site","settings":[{"security_code":{"mode":"mandatory","card_location":"back","length":3},"card_number":{"length":16,"validation":"standard"},"bin":{"pattern":"^4","installments_pattern":"^(403364|409078|410377|415723|421571|42275[456]|437846|44478[123]|44816[234]|449749|449750|449769|450626|450637|450642|450706|451319|45136[67]|454053|45406[56]|454090|45460[23]|454884|455104|455110|455134|455148|45517[56]|455189|458055|46791[01]|47281[123]|473103|473496|47715[789]|483087|485956|489417|49139[456]|491505|491510|491669|491670|49188[234]|49296[1234]|49352[56]|493726|49377[12]|493787|49400[78]|494016|494044|494078|494085|494095|494197|494199|496034|498479)","exclusion_pattern":"^(498535|498525|481521|469703|466240|463308|450624|441010|430308|430307|425677|421301|421300|414284|400773|400773|414284|418989|421300|421301|421827|425677|426511|430307|441010|450624|460067|463308|466240|466241|469703|481521|483114|498524|498525|498535|493526)"},"id":124472957}],"thumbnail":"http://img.mlstatic.com/org-img/MP3/API/logos/visa.gif","bins":[],"marketplace":"NONE","deferred_capture":"unsupported","labels":["recommended_method"],"financing_deals":{"legals":null,"installments":null,"expiration_date":null,"start_date":null,"status":"deactive"},"name":"Visa","site_id":"MLU","processing_mode":"aggregator","additional_info_needed":["cardholder_identification_number","cardholder_name","cardholder_identification_type"],"status":"active"}]}`),
		},
	}
	for _, test := range tests {
		b.Run(test.name, func(b *testing.B) {
			for i := 0; i < b.N; i++ {
				assert.Equal(b, test.isEqual, Equal(test.b1, test.b2))
			}
		})
	}
}
